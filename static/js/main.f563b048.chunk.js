(this["webpackJsonppaperboard-client"]=this["webpackJsonppaperboard-client"]||[]).push([[0],{191:function(e,t,n){e.exports=n.p+"static/media/welcome.c75afa30.jpg"},203:function(e,t,n){e.exports=n.p+"static/media/wood.af6ca17a.jpg"},204:function(e,t,n){e.exports=n.p+"static/media/Wood-4.2688eadb.jpg"},207:function(e,t,n){e.exports=n.p+"static/media/cappuccino2.3aad53f5.jpg"},230:function(e,t,n){e.exports=n(342)},235:function(e,t,n){},236:function(e,t,n){},241:function(e,t,n){},327:function(e,t,n){},328:function(e,t,n){},337:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfjCxgLKyjx6TefAAAAv0lEQVQ4y+2SMQrCQBBFH2vERiyC2NqICHZewEb0FDYewMJTKNh5DMFWPIGFNuksJU06BQkEsRiLSFQczRzAv8V8/v4HuzBQ54jknisTHhoa6oKwTesOh03ubRjUZs+amh2ImNGi5xAjcGLJmaIj4GYCdunwCGjQzK3HTwBCQvNP8L7kHXwlrZLowJwxsZIf2Gh1n4ApZfszVwjCwlqvkCAIEQUbMMrWratdf67GIHN9G1BS3E8gR38AgIviXnQHGY9Kif3efSAAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTEtMjRUMTE6NDM6NDArMDA6MDD5p4TZAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTExLTI0VDExOjQzOjQwKzAwOjAwiPo8ZQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII="},338:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfjCxITAjGsTBIYAAAA10lEQVRIx93SrUoEcRTG4ec/syCCCILFMFGj0RuwCIK3IlrUS9DiFVi1im1MYrKZTIsigiBMkcUPZGXH4BV4TpF9T37f8/XjzEQfrInTorMorq5Ys2UQtH+7SDSfGhWNg/AfXh1yFaag17utNKkNmtqLDTNB+4fdgtp8MODNODX//1ABS2YD3i/PsOIuTMHQKm0KpJviKYXSqHKZumE7sOPTeojFsWt7qfZTol8SG8uqPzp79x5hznkYo9YCxykSTximArrKe+qGo1plMxFwRLEdXOPBvvoHtiwO3rv4JYwAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTEtMThUMTk6MDI6NDkrMDA6MDCdn4KXAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTExLTE4VDE5OjAyOjQ5KzAwOjAw7MI6KwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII="},339:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfjCxgLEyGfqjPAAAAAdElEQVQ4y82RsQmAMBQFDwQLSwvBDQLGYbNAentt4zZKskQsssB/RcBXH5/PHdjnuFntuCdTSfbrL5XC3gWHQCXj7f8PBAXvN8fFbMeb99N+vad3OdOhZpo4/pFpIzIqeKYSrbjjUcw07yJe7CKTmmkhKfgHrwsu/57T6AoAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTEtMjRUMTE6MTk6MzMrMDA6MDCk/6vWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTExLTI0VDExOjE5OjMzKzAwOjAw1aITagAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII="},340:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfjCxUOGyzdY99DAAABAklEQVQ4y8XTvyvEcRzH8cf3OgNJXOpKidQpg0GSlMVgvonhFsazsrCSjYXCwMh8kpIyWAwGRTYl+e3+AavBj+7c9773PYv39Hm9Pq/n+/Pu0+fDf1VGpj7g0HH4RiLUzUlLycXt3uLBsEFP2uIBm9bAuo048SGPWr9OujdSK550YeJHTbrSEA3MOSrTB2aj4p2KesqcLkXd1YGC+QpvQaFaPOs6ZOKkS9mweJNbY6GNRt1prrRXbVcddcfKb6vfi/aqQMqzgVIj4cxU1PWZdl767macCiKBwIn8t0h71adW9XrT8bncs1gzDkt2CYzbl/ceA2i0JRtYrusz3tSR/WN9AIk1KiapkAmsAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTExLTIxVDE0OjI3OjQ0KzAwOjAwi8Ck9gAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMS0yMVQxNDoyNzo0NCswMDowMPqdHEoAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC"},341:function(e,t,n){},342:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),o=n(18),s=n(80),r=(n(235),n(13)),l=n(10),c=n(14),d=n(15),h=n(16),u=n(74),p=(n(236),function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.backgroundImg=new Image,this.backgroundImg.addEventListener("load",(function(){return e.refreshBackground()})),this.backgroundImg.src=this.props.imgSrc,window.addEventListener("resize",(function(){return e.refreshBackground()}))}},{key:"componentWillUnmount",value:function(){var e=this;this.backgroundImg.removeEventListener("load",(function(){return e.refreshBackground()})),window.removeEventListener("resize",(function(){return e.refreshBackground()}))}},{key:"refreshBackground",value:function(){var e=document.getElementById("page-container"),t=document.getElementById("background-canvas"),n=t.getContext("2d");t.style.width="".concat(e.clientWidth,"px"),t.width=e.clientWidth,t.style.height="".concat(e.clientHeight,"px"),t.height=e.clientHeight;var i,a,o,s,r=t.width,l=t.height,c=l/r,d=this.backgroundImg,h=d.width,u=d.height;c>u/h?(i=(h-(o=(s=u)/c))/2,a=0):(i=0,a=(u-(s=(o=h)*c))/2),n.drawImage(d,i,a,o,s,0,0,r,l)}},{key:"addMinimumStyleAttributes",value:function(e){var t={position:"relative",overflow:"hidden",width:"100%",height:"100%"};if(void 0===e)e=t;else for(var n=Object.keys(t),i=0;i<n.length;i++)e.hasOwnProperty(n[i])||(e[n[i]]=t[n[i]])}},{key:"render",value:function(){var e=this.props.customStyle;return this.addMinimumStyleAttributes(e),a.a.createElement("div",{id:"page-container",style:e},a.a.createElement("canvas",{id:"background-canvas",style:{position:"absolute",top:"0px",left:"0px",height:"100%",width:"100%",zIndex:-1},alt:"background"}),this.props.children)}}]),t}(i.Component)),g={hostname:"http://mydomain.com",http_port:1245,rest_url:"http://mydomain.com:1245/REST",socket_port:1236,socket_url:"ws://mydomain.com:1236/websockets/sock1"};["dev","develop","development"].includes(Object({NODE_ENV:"production",PUBLIC_URL:"/PaperBoardClient",REACT_APP_HOSTNAME_DEV:"localhost",REACT_APP_REST_PROTOCOL_DEV:"http",REACT_APP_REST_PORT_DEV:"8081",REACT_APP_SOCKET_PROTOCOL_DEV:"ws",REACT_APP_SOCKET_PORT_DEV:"8025",REACT_APP_SOCKET_API_DEV:"websocket/v1/paperboard",REACT_APP_HOSTNAME_PROD:"just-draw-it.herokuapp.com",REACT_APP_REST_PROTOCOL_PROD:"http",REACT_APP_REST_PORT_PROD:"8081",REACT_APP_SOCKET_PROTOCOL_PROD:"ws",REACT_APP_SOCKET_PORT_PROD:"8025",REACT_APP_SOCKET_API_PROD:"websocket/v1/paperboard"}).REACT_APP_ENVIRONMENT)?(g.hostname="localhost",g.http_port="8081",g.rest_url="".concat("http","://").concat("localhost",":").concat("8081"),g.socket_port="8025",g.socket_url="".concat("ws","://").concat("localhost",":").concat("8025","/").concat("websocket/v1/paperboard")):["prod","production"].includes(Object({NODE_ENV:"production",PUBLIC_URL:"/PaperBoardClient",REACT_APP_HOSTNAME_DEV:"localhost",REACT_APP_REST_PROTOCOL_DEV:"http",REACT_APP_REST_PORT_DEV:"8081",REACT_APP_SOCKET_PROTOCOL_DEV:"ws",REACT_APP_SOCKET_PORT_DEV:"8025",REACT_APP_SOCKET_API_DEV:"websocket/v1/paperboard",REACT_APP_HOSTNAME_PROD:"just-draw-it.herokuapp.com",REACT_APP_REST_PROTOCOL_PROD:"http",REACT_APP_REST_PORT_PROD:"8081",REACT_APP_SOCKET_PROTOCOL_PROD:"ws",REACT_APP_SOCKET_PORT_PROD:"8025",REACT_APP_SOCKET_API_PROD:"websocket/v1/paperboard"}).REACT_APP_ENVIRONMENT)&&(g.hostname="just-draw-it.herokuapp.com",g.http_port="8081",g.rest_url="".concat("http","://").concat("just-draw-it.herokuapp.com"),g.socket_port="8025",g.socket_url="".concat("ws","://").concat("just-draw-it.herokuapp.com","/").concat("websocket/v1/paperboard"));var m=g,E={SOCKET_MSG:{IDENTIFY:"Ask Pseudo",GET_BOARD:"Get Board",GET_ALL_BOARDS:"Get All Boards",CREATE_BOARD:"Create Board",JOIN_BOARD:"Join Board",LEAVE_BOARD:"Leave Board",CREATE_OBJECT:"Create Object",EDIT_OBJECT:"Edit Object",LOCK_OBJECT:"Lock Object",UNLOCK_OBJECT:"Unlock Object",CHAT_MESSAGE:"Chat Message",DELETE_OBJECT:"Delete Object",IDENTIFY_ANSWER:"Pseudo Request Answer",ANSWER_GET_BOARD:"Answer Get Board",ANSWER_GET_ALL_BOARDS:"Answer Get All Boards",ANSWER_CREATE_BOARD:"Answer Create Board",DRAWER_JOIN_BOARD:"New Drawer Joined Board",DRAWER_LEFT_BOARD:"Drawer Left Board",DRAWER_DISCONNECTED:"Drawer Disconnected",OBJECT_CREATED:"Object Created",OBJECT_EDITED:"Object Edited",OBJECT_DELETED:"Object Deleted",OBJECT_LOCKED:"Object Locked",OBJECT_UNLOCKED:"Object Unlocked"}},f=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(r.a)(this,e),this.moduleName=null===n?t:t+"/"+n,this.commonTypes=["number","string"],this.endCharacters=[".","!","?",":"],this.environment="production"}return Object(l.a)(e,[{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1!==t.length||this.commonTypes.includes(typeof t[0])){for(var i=[],a="[".concat(this.moduleName,"] -"),o=0;o<t.length;o++)a+=" "+t[o],t[o]instanceof Error&&i.push(t[o]);for(this.endCharacters.includes(a.charAt(a.length-1))||(a+="."),console.log(a);i.length>0;)console.error(i.shift())}else console.log(t[0])}}]),e}(),b=new(function(){function e(){return Object(r.a)(this,e),e.instance?e.instance:(e.instance=this,this.componentName="Socket Client",this.backend_url="".concat(m.socket_url),this.socketClient=null,this.connected=!1,this.reconnectionParams={reconnect:!0,reconnectionDelay:1e3,maxAttempts:50,currentAttemps:0},this.init=this.init.bind(this),this.stop=this.stop.bind(this),this.onConnect=this.onConnect.bind(this),this.onDisconnect=this.onDisconnect.bind(this),this.onMessage=this.onMessage.bind(this),this.sendMessage=this.sendMessage.bind(this),this.handlers={identifiedHandlers:[],answerGetAllBoardsHandlers:[],answerGetBoardHandlers:[],answerCreatePaperBoardHandlers:[],drawerJoinedBoardHandlers:[],drawerLeftBoardHandlers:[],chatMessageHandlers:[],askDeletionHandlers:[],objLockedHandlers:[],objUnlockedHandlers:[],objCreatedHandlers:[],objEditedHandlers:[],objDeletedHandlers:[],objAskDeleteHandlers:[],drawerConnectedHandlers:[],drawerDisconnectedHandlers:[]},this.logger=new f(this.componentName),this)}return Object(l.a)(e,[{key:"init",value:function(){this.logger.log("Try to connect to WebSocketServer [".concat(this.backend_url,"]...")),this.reconnectionParams.currentAttemps+=1;var e=new WebSocket(this.backend_url);this.socketClient=e,this.socketClient.onopen=this.onConnect,this.socketClient.onmessage=this.onMessage,this.socketClient.onclose=this.onDisconnect}},{key:"stop",value:function(){this.tryToReconnect=!1,this.socketClient.close(),this.socketClient=null}},{key:"onConnect",value:function(){this.logger.log("Connection successful to [".concat(this.backend_url,"]")),this.connected=!0,this.reconnectionParams.currentAttemps=0}},{key:"onDisconnect",value:function(e){switch(this.reconnectionParams.currentAttemps<2&&this.handlers.drawerDisconnectedHandlers.forEach((function(e){e()})),e.code){case 1e3:break;default:var t=this.reconnectionParams,n=t.reconnect,i=t.maxAttempts,a=t.currentAttemps,o=t.reconnectionDelay;n&&a<i&&setTimeout(this.init,o)}this.logger.log("Disconnected from server [".concat(this.backend_url,"]"))}},{key:"onMessage",value:function(e){var t=null;try{t=JSON.parse(e.data),this.logger.log("Received ".concat(t.type," from ").concat(void 0===t.from?"server":t.from,"."))}catch(n){this.logger.log("Invalid message sent through WebSocket. Unable to parse.",n),this.logger.log(e),t={}}switch(t.type){case E.SOCKET_MSG.IDENTIFY_ANSWER:this.logger.log("Trigger identified handlers (".concat(this.handlers.identifiedHandlers.length,").")),this.handlers.identifiedHandlers.forEach((function(e){e(t)}));break;case E.SOCKET_MSG.ANSWER_GET_ALL_BOARDS:this.logger.log("Trigger getAllBoards handlers (".concat(this.handlers.answerGetAllBoardsHandlers.length,").")),this.handlers.answerGetAllBoardsHandlers.forEach((function(e){e(t.payload)}));break;case E.SOCKET_MSG.ANSWER_GET_BOARD:this.logger.log("Trigger GetBoard handlers (".concat(this.handlers.answerGetBoardHandlers.length,").")),this.handlers.answerGetBoardHandlers.forEach((function(e){e(t.payload)}));break;case E.SOCKET_MSG.ANSWER_CREATE_BOARD:this.logger.log("Trigger CreateBoard handlers (".concat(this.handlers.answerCreatePaperBoardHandlers.length,").")),this.handlers.answerCreatePaperBoardHandlers.forEach((function(e){e(t.payload)}));break;case E.SOCKET_MSG.DRAWER_JOIN_BOARD:this.logger.log("Trigger drawer joined board handlers (".concat(this.handlers.drawerJoinedBoardHandlers.length,").")),this.handlers.drawerJoinedBoardHandlers.forEach((function(e){e(t.payload.userlist)}));break;case E.SOCKET_MSG.DRAWER_LEFT_BOARD:this.logger.log("Trigger drawer left board handlers (".concat(this.handlers.drawerLeftBoardHandlers.length,").")),this.handlers.drawerLeftBoardHandlers.forEach((function(e){e(t.payload.leaver,t.payload.userlist)}));break;case E.SOCKET_MSG.CHAT_MESSAGE:this.logger.log("Trigger chat message handlers (".concat(this.handlers.chatMessageHandlers.length,").")),this.handlers.chatMessageHandlers.forEach((function(e){e(t.payload.writer,t.payload.msg)}));break;case E.SOCKET_MSG.ASK_DELETION:this.logger.log("Trigger ask deletion handlers (".concat(this.handlers.askDeletionHandlers.length,").")),this.handlers.askDeletionHandlers.forEach((function(e){return e()}));break;case E.SOCKET_MSG.OBJECT_LOCKED:this.logger.log("Trigger object locked handlers (".concat(this.handlers.objLockedHandlers.length,").")),this.handlers.objLockedHandlers.forEach((function(e){return e(t.payload)}));break;case E.SOCKET_MSG.OBJECT_UNLOCKED:this.logger.log("Trigger object unlocked handlers (".concat(this.handlers.objUnlockedHandlers.length,").")),this.handlers.objUnlockedHandlers.forEach((function(e){return e(t.payload)}));break;case E.SOCKET_MSG.OBJECT_CREATED:this.logger.log("Trigger object created handlers (".concat(this.handlers.objCreatedHandlers.length,").")),this.handlers.objCreatedHandlers.forEach((function(e){return e(t.payload)}));break;case E.SOCKET_MSG.OBJECT_EDITED:this.logger.log("Trigger object edited (".concat(this.handlers.objEditedHandlers.length,").")),this.handlers.objEditedHandlers.forEach((function(e){return e(t.payload)}));break;case E.SOCKET_MSG.OBJECT_DELETED:this.logger.log("Trigger object deleted (".concat(this.handlers.objDeletedHandlers.length,").")),this.handlers.objDeletedHandlers.forEach((function(e){return e(t.payload)}));break;case E.SOCKET_MSG.DRAWER_CONNECTED:this.logger.log("Trigger drawer connected handlers (".concat(this.handlers.drawerConnectedHandlers.length,").")),this.handlers.drawerConnectedHandlers.forEach((function(e){e(t.payload.userlist)}));break;case E.SOCKET_MSG.DRAWER_DISCONNECTED:this.logger.log("Trigger drawer disconnected handlers (".concat(this.handlers.drawerDisconnectedHandlers.length,").")),this.handlers.drawerDisconnectedHandlers.forEach((function(e){return e(t.from)}));break;case E.SOCKET_MSG.DELETE_OBJECT:this.logger.log("Trigger delete object handlers (".concat(this.handlers.objAskDeleteHandlers.length,").")),this.handlers.objAskDeleteHandlers.forEach((function(e){return e(t)}));break;default:this.logger.log("Unexpected message type received ".concat(t.type," - from ").concat(t.from,"."))}}},{key:"sendMessage",value:function(e){var t=null;if(e.type){try{t=JSON.stringify(e),this.logger.log("Sending ".concat(e.type," to ").concat(void 0===e.to?"server":e.to,"."))}catch(n){this.logger.log("Invalid message sent from the client socket. Unable to parse.",n),t={}}console.log(this.socketClient),this.socketClient&&this.socketClient.readyState===WebSocket.OPEN?this.socketClient.send(t):alert("You have been disconnected, don't forgzt to reconnect")}else this.logger.log("A message must have a type to be sent !",e)}},{key:"subscribeToEvent",value:function(e,t,n){switch(e){case E.SOCKET_MSG.IDENTIFY_ANSWER:this.handlers.identifiedHandlers.push(t);break;case E.SOCKET_MSG.ANSWER_GET_ALL_BOARDS:this.handlers.answerGetAllBoardsHandlers.push(t);break;case E.SOCKET_MSG.ANSWER_GET_BOARD:this.handlers.answerGetBoardHandlers.push(t);break;case E.SOCKET_MSG.ANSWER_CREATE_BOARD:this.handlers.answerCreatePaperBoardHandlers.push(t);break;case E.SOCKET_MSG.DRAWER_JOIN_BOARD:this.handlers.drawerJoinedBoardHandlers.push(t);break;case E.SOCKET_MSG.DRAWER_LEFT_BOARD:this.handlers.drawerLeftBoardHandlers.push(t);break;case E.SOCKET_MSG.CHAT_MESSAGE:this.handlers.chatMessageHandlers.push(t);break;case E.SOCKET_MSG.ASK_DELETION:this.handlers.askDeletionHandlers.push(t);break;case E.SOCKET_MSG.OBJECT_LOCKED:this.handlers.objLockedHandlers.push(t);break;case E.SOCKET_MSG.OBJECT_UNLOCKED:this.handlers.objUnlockedHandlers.push(t);break;case E.SOCKET_MSG.OBJECT_CREATED:this.handlers.objCreatedHandlers.push(t);break;case E.SOCKET_MSG.OBJECT_EDITED:this.handlers.objEditedHandlers.push(t);break;case E.SOCKET_MSG.OBJECT_DELETED:this.handlers.objDeletedHandlers.push(t);break;case E.SOCKET_MSG.DRAWER_CONNECTED:this.handlers.drawerConnectedHandlers.push(t);break;case E.SOCKET_MSG.DRAWER_DISCONNECTED:this.handlers.drawerDisconnectedHandlers.push(t);break;case E.SOCKET_MSG.DELETE_OBJECT:this.handlers.objAskDeleteHandlers.push(t);break;default:this.logger.log("Component [".concat(n,"] attempted to subscribe to unexpected event [").concat(e,"]."))}this.logger.log("Component [".concat(n,"] subscribed to ").concat(e,"."))}},{key:"unsubscribeToEvent",value:function(e,t,n){switch(e){case E.SOCKET_MSG.IDENTIFY_ANSWER:this.handlers.identifiedHandlers=this.handlers.identifiedHandlers.filter((function(e){return e!==t}));break;case E.SOCKET_MSG.ANSWER_GET_BOARD:this.handlers.answerGetBoardHandlers=this.handlers.answerGetBoardHandlers.filter((function(e){return e!==t}));break;case E.SOCKET_MSG.ANSWER_GET_ALL_BOARDS:this.handlers.answerGetAllBoardsHandlers=this.handlers.answerGetAllBoardsHandlers.filter((function(e){return e!==t}));break;case E.SOCKET_MSG.ANSWER_CREATE_BOARD:this.handlers.answerCreatePaperBoardHandlers=this.handlers.answerCreatePaperBoardHandlers.filter((function(e){return e!==t}));break;case E.SOCKET_MSG.DRAWER_JOIN_BOARD:this.handlers.drawerJoinedBoardHandlers=this.handlers.drawerJoinedBoardHandlers.filter((function(e){return e!==t}));break;case E.SOCKET_MSG.DRAWER_LEFT_BOARD:this.handlers.drawerLeftBoardHandlers=this.handlers.drawerLeftBoardHandlers.filter((function(e){return e!==t}));break;case E.SOCKET_MSG.CHAT_MESSAGE:this.handlers.chatMessageHandlers=this.handlers.chatMessageHandlers.filter((function(e){return e!==t}));break;case E.SOCKET_MSG.ASK_DELETION:this.handlers.askDeletionHandlers=this.handlers.askDeletionHandlers.filter((function(e){return e!==t}));break;case E.SOCKET_MSG.OBJECT_LOCKED:this.handlers.objLockedHandlers=this.handlers.objLockedHandlers.filter((function(e){return e!==t}));break;case E.SOCKET_MSG.OBJECT_UNLOCKED:this.handlers.objUnlockedHandlers=this.handlers.objUnlockedHandlers.filter((function(e){return e!==t}));break;case E.SOCKET_MSG.OBJECT_CREATED:this.handlers.objCreatedHandlers=this.handlers.objCreatedHandlers.filter((function(e){return e!==t}));break;case E.SOCKET_MSG.OBJECT_EDITED:this.handlers.objEditedHandlers=this.handlers.objEditedHandlers.filter((function(e){return e!==t}));break;case E.SOCKET_MSG.OBJECT_DELETED:this.handlers.objDeletedHandlers=this.handlers.objDeletedHandlers.filter((function(e){return e!==t}));break;case E.SOCKET_MSG.DRAWER_CONNECTED:this.handlers.drawerConnectedHandler=this.handlers.drawerConnectedHandler.filter((function(e){return e!==t}));break;case E.SOCKET_MSG.DRAWER_DISCONNECTED:this.handlers.drawerDisconnectedHandlers=this.handlers.drawerDisconnectedHandlers.filter((function(e){return e!==t}));break;default:this.logger.log("Component [".concat(n,"] attempted to unsubscribe from unexpected event [").concat(e,"]."))}this.logger.log("Component [".concat(n,"] unsubscribed from ").concat(e,"."))}}]),e}()),A=n(191),C=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).onLogin=function(e){e.preventDefault(),b.sendMessage({type:E.SOCKET_MSG.IDENTIFY,from:"client",to:"server",payload:{pseudo:n.state.pseudo}})},n.handleServerLoginAnswer=function(e){e.payload.pseudoAvailable&&n.state.pseudo?n.props.history.push({pathname:"/lounge",state:{pseudo:n.state.pseudo}}):alert("A user with the pseudo "+n.state.pseudo+" is already connected. Please use another name")},n.handleChange=function(e){n.setState({pseudo:e.target.value})},n.state={pseudo:""},n.componentName="WelcomePage",b.init(),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){b.subscribeToEvent(E.SOCKET_MSG.IDENTIFY_ANSWER,this.handleServerLoginAnswer,this.componentName)}},{key:"componentWillUnmount",value:function(){b.unsubscribeToEvent(E.SOCKET_MSG.IDENTIFY_ANSWER,this.handleServerLoginAnswer,this.componentName)}},{key:"render",value:function(){return a.a.createElement(p,{customStyle:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},imgSrc:A},a.a.createElement("div",{className:"card",style:{width:"fit-content",borderRadius:"10px"}},a.a.createElement("div",{className:"card-content",style:{display:"flex",flexDirection:"column",alignItems:"center"}},a.a.createElement("p",{className:"title is-1",style:{textAlign:"center"}},"Welcome on PaperBoard !"),a.a.createElement("p",{className:"subtitle is-4",style:{textAlign:"center"}},"Don't think too much, draw it !"),a.a.createElement("div",{className:"card",style:{width:"fit-content",borderRadius:"10px"}},a.a.createElement("div",{className:"card-content",id:"card-input",style:{display:"flex",flexDirection:"column",alignItems:"center"}},a.a.createElement("p",{className:"title is-3"},"Your pseudo ?"),a.a.createElement("div",{className:"box"},a.a.createElement("form",{onSubmit:this.onLogin},a.a.createElement("div",{className:"field"},a.a.createElement("p",{className:"control has-icons-left"},a.a.createElement("input",{type:"text",className:"input is-success is-medium",placeholder:"Pseudo",value:this.state.value,onChange:this.handleChange})))),a.a.createElement("div",{className:"field",style:{marginTop:15}},a.a.createElement("p",{className:"control"},a.a.createElement("button",{className:"button is-success is-large",onClick:this.onLogin},"Go !")))))))))}}]),t}(i.Component),y=Object(u.f)(C),O=(n(241),n(193)),T=n.n(O),v=n(202),S=n(203),k=n(387),D=n(144),_=[{title:"Title",field:"title"},{title:"Nb of participants",field:"numberOfConnectedUser"},{title:"Creation date",field:"creationDate"}],w=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).getAllPaperBoards=function(){b.sendMessage({type:E.SOCKET_MSG.GET_ALL_BOARDS,from:n.state.pseudo,to:"server",payload:{}})},n.handleAnswerGetAllBoards=function(e){n._mounted&&n.setState({paperboards:e.paperboards})},n.loopGetAllPaperBoards=function(){n.timeouts.push(setTimeout((function(){n.getAllPaperBoards(),n.loopGetAllPaperBoards()}),3e4))},n.onCreatePaperBoard=function(){n.props.history.push({pathname:"/new-board",state:{pseudo:n.state.pseudo}})},n.goToPaperBoard=function(e){b.sendMessage({type:E.SOCKET_MSG.GET_BOARD,from:n.state.pseudo,to:"server",payload:{title:e}})},n.handleAnswerGetBoard=function(e){n.setState({chosenPaperboard:e.paperboard},(function(){b.sendMessage({type:E.SOCKET_MSG.JOIN_BOARD,from:n.state.pseudo,to:"server",payload:{board:e.paperboard.title}})}))},n.handleJoinBoardServerResponse=function(e){var t=n.state,i=t.pseudo,a=t.chosenPaperboard;a&&n.props.history.push({pathname:"/paperboard/".concat(a.title),state:{paperboard:a,pseudo:i,drawers:e}})},n.componentName="LoungePage",n.timeouts=[],n.state={pseudo:"must auth",paperboards:[],chosenPaperboard:null},n._mounted=!1,n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){if(this._mounted=!0,this.props.location&&this.props.location.state){var e=this.props.location.state.pseudo;this.setState({pseudo:e})}b.subscribeToEvent(E.SOCKET_MSG.ANSWER_GET_ALL_BOARDS,this.handleAnswerGetAllBoards,this.componentName),b.subscribeToEvent(E.SOCKET_MSG.ANSWER_GET_BOARD,this.handleAnswerGetBoard,this.componentName),b.subscribeToEvent(E.SOCKET_MSG.DRAWER_JOIN_BOARD,this.handleJoinBoardServerResponse,this.componentName),this.getAllPaperBoards(),this.loopGetAllPaperBoards()}},{key:"componentWillUnmount",value:function(){for(b.unsubscribeToEvent(E.SOCKET_MSG.DRAWER_JOIN_BOARD,this.handleJoinBoardServerResponse,this.componentName),b.unsubscribeToEvent(E.SOCKET_MSG.ANSWER_GET_BOARD,this.handleAnswerGetBoard,this.componentName),b.unsubscribeToEvent(E.SOCKET_MSG.DRAWER_JOIN_BOARD,this.handleJoinBoardServerResponse,this.componentName);this.timeouts.length>0;){var e=this.timeouts.pop();clearTimeout(e)}this._mounted=!1}},{key:"render",value:function(){var e=this,t=this.state,n=t.pseudo,i=t.paperboards;return i.map((function(e){return e.creationDate=v(e.creationDate).format("dddd, MMMM Do YYYY, h:mm:ss a"),e.drawers=e.drawers.length,e})),a.a.createElement(p,{customStyle:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},imgSrc:S},a.a.createElement("h1",{style:{fontWeight:"bold",fontSize:"3em",marginBottom:5,color:"white",textAlign:"center"}},"".concat(n.charAt(0).toUpperCase()).concat(n.substring(1),", find your place of inspiration !")),a.a.createElement("div",{className:"card",style:{borderRadius:"10px"}},a.a.createElement("div",{className:"card-content"},a.a.createElement("p",{className:"title is-1",style:{textAlign:"center"}},"Join a Board"),a.a.createElement(T.a,{title:a.a.createElement("div",{style:{display:"flex",flex:1,justifyContent:"space-between",alignItems:"center"}},"Boards",a.a.createElement(D.a,{onClick:this.getAllPaperBoards,style:{marginLeft:30}},a.a.createElement(k.a,null))),columns:_,data:i,actions:[{title:"Join",icon:"create",tooltip:"Join",onClick:function(t,n){return e.goToPaperBoard(n.title)}}]}))),a.a.createElement("div",{className:"field",style:{marginTop:15}},a.a.createElement("p",{className:"control"},a.a.createElement("button",{className:"button is-success is-large",onClick:this.onCreatePaperBoard},"Create a new Paperboard"))))}}]),t}(i.Component),B=Object(u.f)(w),R=(n(327),n(389)),j=n(388),P=n(184),M=n(204),x=(n(328),function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.color,n=e.hexColorCode,i=e.handleClick,o=e.listField,s=e.field,r=e.type;return a.a.createElement("div",{className:"dropdown"},a.a.createElement("div",{className:"dropdown is-hoverable"},a.a.createElement("div",{className:"dropdown-trigger"},a.a.createElement("button",{className:"button","aria-haspopup":"true","aria-controls":"dropdown-menu4"},"color"===r&&a.a.createElement("p",{style:{color:n,marginRight:"5%"}},"\u25a0"),a.a.createElement("span",null,t||s))),a.a.createElement("div",{className:"dropdown-menu",id:"dropdown-menu4",role:"menu"},a.a.createElement("div",{className:"dropdown-content"},function(e,t,n){var i=[],o=function(o){i.push(a.a.createElement("div",{className:"dropdown-item",key:t[o],onClick:function(){return e({item:o,value:t[o]})}},a.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},"color"===n?a.a.createElement("p",{style:{color:t[o],fontSize:"3em"}},"\u25a0"):a.a.createElement("div",{style:{fontSize:"3em"}},t[o])),a.a.createElement("hr",{className:"dropdown-divider"})))};for(var s in t)o(s);return i}(i,o,r)))))}}]),t}(i.Component)),N={transparent:"transparent",antiquewhite:"#faebd7",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function L(e){return new Promise((function(t,n){var i=new FileReader;i.readAsDataURL(e),i.onload=function(){return t(i.result)},i.onerror=function(e){return n(e)}}))}for(var I=n(179),G=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).componentDidMount=function(){var e=n.props.location.state;n.setState({pseudo:e?e.pseudo:""}),b.subscribeToEvent(E.SOCKET_MSG.ANSWER_CREATE_BOARD,n.handleAnswerCreateBoard,n.componentName),b.subscribeToEvent(E.SOCKET_MSG.ANSWER_GET_BOARD,n.handleAnswerGetBoard,n.componentName),b.subscribeToEvent(E.SOCKET_MSG.DRAWER_JOIN_BOARD,n.handleJoinBoardServerResponse,n.componentName)},n.defaultBoardTitle="default-paper-board",n.handleTitleChanges=function(e){n.setState({title:e.target.value})},n.handleColor=function(e){var t=e.item,i=e.value;n.setState({color:t,hexColorCode:i})},n.onCreatePaperBoard=function(){var e=n.state.title;if(""!==e){var t={title:e};n.state.isBackgroundImage&&""!==n.state.imageDataUrl?t.backgroundImage=n.state.imageDataUrl:n.state.isBackgroundColor&&""!==n.state.hexColorCode&&(t.backgroundColor=n.state.hexColorCode),b.sendMessage({type:E.SOCKET_MSG.CREATE_BOARD,from:n.state.pseudo,to:"server",payload:t})}},n.handleAnswerCreateBoard=function(e){var t=n.state.title;!0===e.created?b.sendMessage({type:E.SOCKET_MSG.GET_BOARD,from:n.state.pseudo,to:"server",payload:{title:t}}):alert("A board with the name "+t+" already exists. Plesae consider another name")},n.handleAnswerGetBoard=function(e){n.setState({paperboard:e.paperboard},(function(){b.sendMessage({type:E.SOCKET_MSG.JOIN_BOARD,from:n.state.pseudo,to:"server",payload:{board:e.paperboard.title}})}))},n.handleJoinBoardServerResponse=function(e){var t=n.state,i=t.pseudo,a=t.paperboard;n.props.history.push({pathname:"/paperboard/".concat(a.title),state:{paperboard:a,pseudo:i,drawers:e}})},n.handleSwitch=function(e){return function(t){"bgColor"===e?n.setState({isBackgroundColor:t.target.checked,isBackgroundImage:!1}):n.setState({isBackgroundColor:!1,isBackgroundImage:t.target.checked}),n.setState({color:"",hexColorCode:""})}},n.handleImage=function(e){var t=document.getElementById("browseBackgroundImage").files[0];void 0!==t&&(["image/png","image/jpeg","image/jpg"].includes(t.type)?t.size>42e3?alert("File size should not exceed ".concat(42,"ko.")):L(t).then((function(e){n.setState({imageDataUrl:e})})):alert("Bad File Type [".concat(t.type,"]. File type should be among [png, jpeg, jpg].")))},n.componentName="CreateBoardPage",n.state={title:"",color:"",hexColorCode:"",isBackgroundColor:!1,isBackgroundImage:!1,paperboard:null,pseudo:"",imageDataUrl:""},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){b.unsubscribeToEvent(E.SOCKET_MSG.ANSWER_CREATE_BOARD,this.handleAnswerCreateBoard,this.componentName),b.unsubscribeToEvent(E.SOCKET_MSG.ANSWER_GET_BOARD,this.handleAnswerGetBoard,this.componentName),b.unsubscribeToEvent(E.SOCKET_MSG.DRAWER_JOIN_BOARD,this.handleJoinBoardServerResponse,this.componentName)}},{key:"render",value:function(){var e=this,t=this.state,n=t.color,i=t.hexColorCode,o=t.isBackgroundColor,s=t.isBackgroundImage;return a.a.createElement(p,{customStyle:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},imgSrc:M},a.a.createElement("div",{className:"card",style:{borderRadius:"10px"}},a.a.createElement("div",{className:"card-content"},a.a.createElement("p",{className:"title is-1",style:{textAlign:"center"}},"Set up your board and create it !"),a.a.createElement("div",{className:"field"},a.a.createElement("p",{className:"control has-icons-left"},a.a.createElement("input",{type:"text",className:"input is-large is-success",placeholder:"Title - required",value:this.state.title,onChange:this.handleTitleChanges}),a.a.createElement("span",{className:"icon is-small is-left"},a.a.createElement("i",{className:"fas fa-lock"})))),a.a.createElement("div",{className:"field"},a.a.createElement(j.a,{row:!0},a.a.createElement(P.a,{control:a.a.createElement(R.a,{checked:o,onChange:this.handleSwitch("bgColor"),value:"checkedA"}),label:"Background Color"}),a.a.createElement(P.a,{control:a.a.createElement(R.a,{checked:s,onChange:this.handleSwitch("bgImage"),value:"checkedB",color:"primary"}),label:"Background Image"}))),a.a.createElement("div",{className:"empty-div"},o?a.a.createElement(x,{color:n,hexColorCode:i,handleClick:this.handleColor,listField:N,field:"Background color",type:"color"}):null,s?a.a.createElement(I.a,{variant:"contained",onClick:function(){var e=document.getElementById("browseBackgroundImage");e&&e.click()}},"Browse image"):null,a.a.createElement("input",{type:"file",id:"browseBackgroundImage",style:{position:"fixed",bottom:"10000px"},onChange:function(){return e.handleImage()}})))),a.a.createElement("div",{className:"field",style:{marginTop:15}},a.a.createElement("p",{className:"control"},a.a.createElement("button",{className:"button is-success is-large",onClick:this.onCreatePaperBoard},"Create !"))))}}]),t}(i.Component),H=Object(u.f)(G),Y=n(103),K=n.n(Y),X=n(151),W=n(210),F=n(28),J="Out Of Shape",U="Moving Zone",Z="Resizing Zone",Q="Not Editing",V="Resizing Radius",z="Moving",q=function(e,t,n,i,a,o,s){var r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};return new Promise((function(l){l({type:"circle",id:o,name:"circle-".concat(o),owner:s,ctx:e,refX:t,refY:n,refW:i,refH:a,X:r.X||(t+i)/2,Y:r.Y||(n+a)/2,radius:r.radius||50,lineWidth:r.lineWidth||10,lineColor:r.lineColor||"red",lineStyle:r.lineStyle||"normal",fillColor:r.fillColor||"transparent",isLocked:r.isLocked||!1,lockedBy:r.lockedBy||"",previousState:{X:r.X||(t+i)/2,Y:r.Y||(n+a)/2,radius:r.radius||50,lineWidth:r.lineWidth||10,lineColor:r.lineColor||"red",lineStyle:r.lineStyle||"normal",fillColor:r.fillColor||"transparent"},editionState:Q,oldDragX:null,oldDragY:null,refreshArea:function(e,t,n,i){if(this.ctx.save(),this.ctx.beginPath(),this.ctx.lineWidth=this.lineWidth,this.ctx.strokeStyle=this.lineColor,this.ctx.arc(this.X,this.Y,this.radius,0,2*Math.PI,!0),"dashed"===this.lineStyle&&this.ctx.setLineDash([8,8]),this.ctx.stroke(),"transparent"!==this.fillColor&&(this.ctx.fillStyle=this.fillColor,this.ctx.fill()),this.isLocked){this.ctx.beginPath(),this.ctx.strokeStyle=F(this.lockedBy),this.ctx.lineWidth=5,this.ctx.setLineDash([8,8]),this.ctx.rect(this.X-this.radius-15,this.Y-this.radius-15,2*(this.radius+15),2*(this.radius+15)),this.ctx.stroke(),this.ctx.strokeStyle=F(this.lockedBy),this.ctx.setLineDash([]),this.ctx.beginPath(),this.ctx.arc(this.X-this.radius-15,this.Y-this.radius-15,10,0,2*Math.PI),this.ctx.stroke(),this.ctx.fillStyle=F(this.lockedBy),this.ctx.fill(),this.ctx.beginPath(),this.ctx.arc(this.X+this.radius+15,this.Y+this.radius+15,10,0,2*Math.PI),this.ctx.stroke(),this.ctx.fillStyle=F(this.lockedBy),this.ctx.fill()}this.ctx.restore()},applyModifications:function(e){for(var t=Object.keys(this.previousState),n=0;n<t.length;n++)if(e.hasOwnProperty(t[n])){var i=isNaN(this.previousState[t[n]])?e[t[n]]:Number(e[t[n]]);this[t[n]]=i,this.previousState[t[n]]=i}},onMouseDown:function(e,t,n){var i=this._computeCorrespondingZone(e,t);return!this.isLocked&&i!==J||(this.lockedBy===n&&i===U?(this.editionState=z,this.oldDragX=e,this.oldDragY=t,!0):this.lockedBy===n&&i===Z&&(this.editionState=V,this.oldDragX=e,this.oldDragY=t,!0))},onMouseHover:function(e,t,n){var i=this._computeCorrespondingZone(e,t);return this.isLocked||i===J?this.lockedBy===n&&i===U?(document.getElementsByTagName("body")[0].style.cursor="url('cursor url with protocol'), move",!0):this.lockedBy===n&&i===Z&&(document.getElementsByTagName("body")[0].style.cursor="url('cursor url with protocol'), grab",!0):(document.getElementsByTagName("body")[0].style.cursor="url('cursor url with protocol'), pointer",!0)},onMouseDrag:function(e,t,n){if(this.lockedBy===n&&this.editionState===V){var i=Math.sqrt((this.oldDragX-this.X)*(this.oldDragX-this.X)+(this.oldDragY-this.Y)*(this.oldDragY-this.Y)),a=Math.sqrt((e-this.X)*(e-this.X)+(t-this.Y)*(t-this.Y));return this.radius+=a-i,this.oldDragX=e,this.oldDragY=t,!0}return this.lockedBy===n&&this.editionState===z&&(this.X+=e-this.oldDragX,this.Y+=t-this.oldDragY,this.oldDragX=e,this.oldDragY=t,!0)},onMouseUp:function(e,t,n){this.editionState=Q,this.oldDragX=null,this.oldDragY=null;for(var i={modifications:{},shouldUnlock:!1},a=Object.keys(this.previousState),o=0;o<a.length;o++)this.previousState[a[o]]!==this[a[o]]&&(i.modifications[a[o]]=this[a[o]].toString(),this.previousState[a[o]]=this[a[o]]);var s=this._computeCorrespondingZone(e,t);return this.lockedBy===n&&s===J&&(i.shouldUnlock=!0),i},_computeCorrespondingZone:function(e,t){var n=(e-this.X)*(e-this.X)+(t-this.Y)*(t-this.Y);if(n<this.radius*this.radius)return U;return n<(this.radius+this.lineWidth+10)*(this.radius+this.lineWidth+10)?Z:J}})}))},$={OUT:"Out Of Shape",MOVE_SHAPE:"Moving Zone",RESIZE_FROM_TOP_LEFT:"Resizing Zone Top Left",RESIZE_FROM_TOP_RIGHT:"Resizing Zone Top Right",RESIZE_FROM_BOTTOM_LEFT:"Resizing Zone Bottom Left",RESIZE_FROM_BOTTOM_RIGHT:"Resizing Zone Bottom Right"},ee="Not Editing",te="Resizing Image Corner From Top Left",ne="Resizing Image Corner From Top Right",ie="Resizing Image Corner From Bottom Left",ae="Resizing Image Corner From Bottom Right",oe="Moving",se=function(e,t,n,i,a,o,s,r){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{};return new Promise((function(c){var d={type:"image",id:s,name:"image-".concat(s),owner:r,ctx:e,refX:t,refY:n,refW:i,refH:a,src:null,srcX:0,srcY:0,srcW:0,srcH:0,X:l.X||(t+i)/2,Y:l.Y||(n+a)/2,width:l.width||300,height:l.height||300,isLocked:l.isLocked||!1,lockedBy:l.lockedBy||"",previousState:{X:l.X||(t+i)/2,Y:l.Y||(n+a)/2,width:l.width||50,height:l.height||50},editionState:null,oldDragX:null,oldDragY:null,refreshArea:function(e,t,n,i){if(this.ctx.save(),this.ctx.drawImage(this.src,0,0,this.srcW,this.srcH,this.X,this.Y,this.width,this.height),this.isLocked){this.ctx.beginPath(),this.ctx.strokeStyle=F(this.lockedBy),this.ctx.lineWidth=5,this.ctx.setLineDash([8,8]),this.ctx.rect(this.X-15,this.Y-15,this.width+30,this.height+30),this.ctx.stroke(),this.ctx.strokeStyle=F(this.lockedBy),this.ctx.setLineDash([]),this.ctx.beginPath(),this.ctx.arc(this.X-15,this.Y-15,10,0,2*Math.PI),this.ctx.stroke(),this.ctx.fillStyle=F(this.lockedBy),this.ctx.fill(),this.ctx.beginPath(),this.ctx.arc(this.X+this.width+15,this.Y+this.height+15,10,0,2*Math.PI),this.ctx.stroke(),this.ctx.fillStyle=F(this.lockedBy),this.ctx.fill()}this.ctx.restore()},applyModifications:function(e){for(var t=Object.keys(this.previousState),n=0;n<t.length;n++)if(e.hasOwnProperty(t[n])){var i=isNaN(this.previousState[t[n]])?e[t[n]]:Number(e[t[n]]);this[t[n]]=i,this.previousState[t[n]]=i}},onMouseDown:function(e,t,n){var i=this._computeCorrespondingZone(e,t);return!this.isLocked&&i!==$.OUT||(this.lockedBy===n&&i===$.MOVE_SHAPE?(this.editionState=oe,this.oldDragX=e,this.oldDragY=t,!0):this.lockedBy===n&&i===$.RESIZE_FROM_TOP_LEFT?(this.editionState=te,this.oldDragX=e,this.oldDragY=t,!0):this.lockedBy===n&&i===$.RESIZE_FROM_TOP_RIGHT?(this.editionState=ne,this.oldDragX=e,this.oldDragY=t,!0):this.lockedBy===n&&i===$.RESIZE_FROM_BOTTOM_LEFT?(this.editionState=ie,this.oldDragX=e,this.oldDragY=t,!0):this.lockedBy===n&&i===$.RESIZE_FROM_BOTTOM_RIGHT&&(this.editionState=ae,this.oldDragX=e,this.oldDragY=t,!0))},onMouseHover:function(e,t,n){var i=this._computeCorrespondingZone(e,t);return this.isLocked||i===$.OUT?this.lockedBy===n&&i===$.MOVE_SHAPE?(document.getElementsByTagName("body")[0].style.cursor="url('cursor url with protocol'), move",!0):!(this.lockedBy!==n||![$.RESIZE_FROM_TOP_LEFT,$.RESIZE_FROM_TOP_RIGHT,$.RESIZE_FROM_BOTTOM_LEFT,$.RESIZE_FROM_BOTTOM_RIGHT].includes(i))&&(document.getElementsByTagName("body")[0].style.cursor="url('cursor url with protocol'), grab",!0):(document.getElementsByTagName("body")[0].style.cursor="url('cursor url with protocol'), pointer",!0)},onMouseDrag:function(e,t,n){return this.lockedBy===n&&this.editionState===te?(this.X=e,this.width=this.width-(e-this.oldDragX),this.height=this.width*this.srcH/this.srcW,this.oldDragX=e,this.oldDragY=t,!0):this.lockedBy===n&&this.editionState===ne?(this.width=this.width+(e-this.oldDragX),this.height=this.width*this.srcH/this.srcW,this.oldDragX=e,this.oldDragY=t,!0):this.lockedBy===n&&this.editionState===ie?(this.X=e,this.width=this.width-(e-this.oldDragX),this.height=this.width*this.srcH/this.srcW,this.oldDragX=e,this.oldDragY=t,!0):this.lockedBy===n&&this.editionState===ae?(this.width=this.width+(e-this.oldDragX),this.height=this.width*this.srcH/this.srcW,this.oldDragX=e,this.oldDragY=t,!0):this.lockedBy===n&&this.editionState===oe&&(this.X+=e-this.oldDragX,this.Y+=t-this.oldDragY,this.oldDragX=e,this.oldDragY=t,!0)},onMouseUp:function(e,t,n){this.editionState=ee,this.oldDragX=null,this.oldDragY=null;for(var i={modifications:{},shouldUnlock:!1},a=Object.keys(this.previousState),o=0;o<a.length;o++)this.previousState[a[o]]!==this[a[o]]&&(i.modifications[a[o]]=this[a[o]].toString(),this.previousState[a[o]]=this[a[o]]);var s=this._computeCorrespondingZone(e,t);return this.lockedBy===n&&s===$.OUT&&(i.shouldUnlock=!0),i},_computeCorrespondingZone:function(e,t){var n={};n[$.RESIZE_FROM_TOP_LEFT]=(e-this.X+15)*(e-this.X+15)+(t-this.Y+15)*(t-this.Y+15),n[$.RESIZE_FROM_TOP_RIGHT]=(e-this.X-this.width-15)*(e-this.X-this.width-15)+(t-this.Y+15)*(t-this.Y+15),n[$.RESIZE_FROM_BOTTOM_LEFT]=(e-this.X+15)*(e-this.X+15)+(t-this.Y-this.height-15)*(t-this.Y-this.height-15),n[$.RESIZE_FROM_BOTTOM_RIGHT]=(e-this.X-this.width-15)*(e-this.X-this.width-15)+(t-this.Y-this.height-15)*(t-this.Y-this.height-15);for(var i=Object.keys(n),a=i[0],o=1;o<i.length;o++)n[i[o]]<n[a]&&(a=i[o]);if(n[a]<400)return a;var s=this.X-15<e&&e<this.X+this.width+15,r=this.Y-15<t&&t<this.Y+this.height+15;return s&&r?$.MOVE_SHAPE:$.OUT}},h=new Image;h.onload=function(){d.src=this,d.srcW=this.width,d.srcH=this.height,this.width>this.height?d.W=d.H/(this.height/this.width):d.H=d.W*(this.height/this.width),c(d)},h.src=o}))},re=function(e,t,n,i,a,o){return new Promise((function(s){var r={type:"background-image",ctx:e,refX:t,refY:n,refW:i,refH:a,src:null,srcX:0,srcY:0,srcW:0,srcH:0,refreshArea:function(e,t,n,i){this.ctx.save(),this.ctx.drawImage(this.src,this.srcX,this.srcY,this.srcW,this.srcH,this.refX,this.refY,this.refW,this.refH),this.ctx.restore()}},l=new Image;l.onload=function(){r.src=this;var e=this.height/this.width,t=r.refH/r.refW;e>t?(r.srcW=this.width,r.srcH=this.width*t,r.srcX=0,r.srcY=(this.height-r.srcH)/2):(r.srcH=this.height,r.srcW=this.height/t,r.srcX=(this.width-r.srcW)/2,r.srcY=0),console.log("Resolving Background !"),s(r)},l.src=o}))},le=function(e,t,n,i,a,o){return new Promise((function(s){s({type:"background-color",ctx:e,refX:t,refY:n,refW:i,refH:a,color:o,refreshArea:function(e,t,n,i){this.ctx.save(),this.ctx.fillStyle=this.color,this.ctx.fillRect(e,t,n-e,i-t),this.ctx.restore()}})}))},ce="Out Of Shape",de="Moving Zone",he="Start Point Zone",ue="End Point Zone",pe="Not Editing",ge="Moving StartPoint",me="Moving EndPoint",Ee="Moving",fe=function(e,t,n,i,a,o,s){var r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};return new Promise((function(l){l({type:"line",id:o,name:"line-".concat(o),owner:s,ctx:e,refX:t,refY:n,refW:i,refH:a,X:r.X||(t+i)/2,Y:r.Y||(n+a)/2,positionEndPointX:r.positionEndPoint.x||50,positionEndPointY:r.positionEndPoint.y||180,lineWidth:r.lineWidth||10,lineColor:r.lineColor||"red",lineStyle:r.lineStyle||"normal",isLocked:r.isLocked||!1,lockedBy:r.lockedBy||"",previousState:{X:r.X||(t+i)/2,Y:r.Y||(n+a)/2,positionEndPointX:r.positionEndPoint.x||50,positionEndPointY:r.positionEndPoint.y||180,lineWidth:r.lineWidth||10,lineColor:r.lineColor||"red",lineStyle:r.lineStyle||"normal"},editionState:pe,oldDragX:null,oldDragY:null,refreshArea:function(e,t,n,i){if(this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(this.X,this.Y),this.ctx.lineWidth=this.lineWidth,this.ctx.strokeStyle=this.lineColor,"dashed"===this.lineStyle&&this.ctx.setLineDash([8,8]),this.ctx.lineTo(this.positionEndPointX,this.positionEndPointY),this.ctx.stroke(),this.isLocked){this.ctx.beginPath(),this.ctx.strokeStyle=F(this.lockedBy),this.ctx.lineWidth=5,this.ctx.setLineDash([8,8]),this.ctx.rect(Math.min(this.X,this.positionEndPointX)-15,Math.min(this.Y,this.positionEndPointY)-15,Math.abs(this.X-this.positionEndPointX)+30,Math.abs(this.Y-this.positionEndPointY)+30),this.ctx.stroke(),this.ctx.strokeStyle=F(this.lockedBy),this.ctx.setLineDash([]),this.ctx.beginPath(),this.ctx.arc(this.X-this.radius-15,this.Y-this.radius-15,10,0,2*Math.PI),this.ctx.stroke(),this.ctx.fillStyle=F(this.lockedBy),this.ctx.fill(),this.ctx.beginPath(),this.ctx.arc(this.X+this.radius+15,this.Y+this.radius+15,10,0,2*Math.PI),this.ctx.stroke(),this.ctx.fillStyle=F(this.lockedBy),this.ctx.fill()}this.ctx.restore()},applyModifications:function(e){console.log("AAAPPLLLPPLLPYYYY ????????"),console.log(e);for(var t=Object.keys(this.previousState),n=0;n<t.length;n++)if(e.hasOwnProperty(t[n])){var i=isNaN(this.previousState[t[n]])?e[t[n]]:Number(e[t[n]]);this[t[n]]=i,this.previousState[t[n]]=i}},onMouseDown:function(e,t,n){var i=this._computeCorrespondingZone(e,t);return!this.isLocked&&i!==ce||(this.lockedBy===n&&i===he?(this.editionState=ge,this.oldDragX=e,this.oldDragY=t,!0):this.lockedBy===n&&i===ue?(this.editionState=me,this.oldDragX=e,this.oldDragY=t,!0):this.lockedBy===n&&i===de&&(this.editionState=Ee,this.oldDragX=e,this.oldDragY=t,!0))},onMouseHover:function(e,t,n){var i=this._computeCorrespondingZone(e,t);return this.isLocked||i===ce?this.lockedBy!==n||i!==he&&i!==ue?this.lockedBy===n&&i===de&&(document.getElementsByTagName("body")[0].style.cursor="url('cursor url with protocol'), move",!0):(document.getElementsByTagName("body")[0].style.cursor="url('cursor url with protocol'), grab",!0):(document.getElementsByTagName("body")[0].style.cursor="url('cursor url with protocol'), pointer",!0)},onMouseDrag:function(e,t,n){return this.lockedBy===n&&this.editionState===ge?(this.X+=e-this.oldDragX,this.Y+=t-this.oldDragY,this.oldDragX=e,this.oldDragY=t,!0):this.lockedBy===n&&this.editionState===me?(this.positionEndPointX+=e-this.oldDragX,this.positionEndPointY+=t-this.oldDragY,this.oldDragX=e,this.oldDragY=t,!0):this.lockedBy===n&&this.editionState===Ee&&(this.X+=e-this.oldDragX,this.positionEndPointX+=e-this.oldDragX,this.Y+=t-this.oldDragY,this.positionEndPointY+=t-this.oldDragY,this.oldDragX=e,this.oldDragY=t,!0)},onMouseUp:function(e,t,n){this.editionState=pe,this.oldDragX=null,this.oldDragY=null;var i={modifications:{},shouldUnlock:!1},a=Object.keys(this.previousState);console.log(this.positionEndPointX),console.log(this.previousState.positionEndPointX),console.log(a);for(var o=0;o<a.length;o++)console.log(a[o]),this.previousState[a[o]]!==this[a[o]]&&(console.log("Dans le elseif pour ".concat(a[o])),"positionEndPointX"===a[o]?i.modifications.positionEndPoint={x:this.positionEndPointX.toString(),y:this.positionEndPointY.toString()}:"positionEndPointY"===a[o]?i.modifications.positionEndPoint={x:this.positionEndPointX.toString(),y:this.positionEndPointY.toString()}:(i.modifications[a[o]]=this[a[o]].toString(),this.previousState[a[o]]=this[a[o]]));var s=this._computeCorrespondingZone(e,t);return this.lockedBy===n&&s===ce&&(i.shouldUnlock=!0),console.log("Computed modifications"),console.log(Object.keys(i.modifications)),i},_computeCorrespondingZone:function(e,t){if((e-this.X)*(e-this.X)+(t-this.Y)*(t-this.Y)<225)return he;if((e-this.positionEndPointX)*(e-this.positionEndPointX)+(t-this.positionEndPointY)*(t-this.positionEndPointY)<225)return ue;var n=Math.min(this.X,this.positionEndPointX)<e&&e<Math.max(this.X,this.positionEndPointX),i=Math.min(this.Y,this.positionEndPointY)<t&&t<Math.max(this.Y,this.positionEndPointY);return n&&i?de:ce}})}))},be=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).generateObjectPile=function(){var e=Object(X.a)(K.a.mark((function e(t){var i,a,o,s,r,l,c,d;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===n.props.board.backgroundImage){e.next=6;break}return e.next=3,re(n.state.ctx,0,0,n.state.width,n.state.height,n.props.board.backgroundImage);case 3:n.background=e.sent,e.next=10;break;case 6:if(""===n.props.board.backgroundColor){e.next=10;break}return e.next=9,le(n.state.ctx,0,0,n.state.width,n.state.height,n.props.board.backgroundColor);case 9:n.background=e.sent;case 10:i=n.state,a=i.ctx,o=i.width,s=i.height,r=[],l=Object.keys(t),c=0;case 14:if(!(c<l.length)){e.next=41;break}if("circle"!==(d=t[l[c]]).type){e.next=24;break}return e.t0=r,e.next=20,q(a,0,0,o,s,d.drawingId,d.owner.pseudo,{X:d.position.x,Y:d.position.y,radius:d.radius,lineWidth:d.lineWidth,lineColor:d.lineColor,fillColor:d.fillColor,lineStyle:d.lineStyle,isLocked:d.isLocked,lockedBy:d.lockedBy});case 20:e.t1=e.sent,e.t0.push.call(e.t0,e.t1),e.next=38;break;case 24:if("image"!==d.type){e.next=32;break}return e.t2=r,e.next=28,se(a,0,0,o,s,d.srcURI,d.drawingId,d.owner.pseudo,{X:d.position.x,Y:d.position.y,width:d.width,height:d.height,isLocked:d.isLocked,lockedBy:d.lockedBy});case 28:e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=38;break;case 32:if("line"!==d.type){e.next=38;break}return e.t4=r,e.next=36,fe(a,0,0,o,s,d.drawingId,d.owner.pseudo,{X:d.position.x,Y:d.position.y,positionEndPoint:{x:d.positionEndPoint.x,y:d.positionEndPoint.y},isLocked:d.isLocked,lockedBy:d.lockedBy});case 36:e.t5=e.sent,e.t4.push.call(e.t4,e.t5);case 38:c++,e.next=14;break;case 41:return e.abrupt("return",r);case 42:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.createObject=function(){var e=Object(X.a)(K.a.mark((function e(t){var i,a,o;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Should Create Object"),console.log(t),e.t0=t.type,e.next="image"===e.t0?5:"circle"===e.t0?11:"line"===e.t0?17:23;break;case 5:return e.next=7,se(n.state.ctx,0,0,n.state.width,n.state.height,t.srcURI,t.drawingId,t.pseudo,{X:parseFloat(t.position.x),Y:parseFloat(t.position.y),width:parseFloat(t.width),height:parseFloat(t.height)});case 7:return i=e.sent,n.objPile.push(i),i.refreshArea(0,0,n.state.width,n.state.height),e.abrupt("break",24);case 11:return e.next=13,q(n.state.ctx,0,0,n.state.width,n.state.height,t.drawingId,t.pseudo,{X:parseFloat(t.position.x),Y:parseFloat(t.position.y),radius:parseFloat(t.radius),lineWidth:parseFloat(t.lineWidth),lineColor:t.lineColor,lineStyle:t.lineStyle});case 13:return a=e.sent,n.objPile.push(a),a.refreshArea(0,0,n.state.width,n.state.height),e.abrupt("break",24);case 17:return e.next=19,fe(n.state.ctx,0,0,n.state.width,n.state.height,t.drawingId,t.pseudo,{X:parseFloat(t.position.x),Y:parseFloat(t.position.y),positionEndPoint:{x:parseFloat(t.positionEndPoint.x),y:parseFloat(t.positionEndPoint.y)},lineWidth:parseFloat(t.lineWidth),lineColor:t.lineColor,lineStyle:t.lineStyle});case 19:return o=e.sent,n.objPile.push(o),o.refreshArea(0,0,n.state.width,n.state.height),e.abrupt("break",24);case 23:console.log("Default case for Object Created Handler in Canvas Manager");case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onObjectLocked=function(e){for(var t=e.drawingId,i=e.pseudo,a=!1,o=0;o<n.objPile.length&&!a;)n.objPile[o].id===t?a=!0:o+=1;if(a){if(n.objPile[o].isLocked=!0,n.objPile[o].lockedBy=i,n.props.pseudo===i){var s=n.props,r=s.pseudo,l=s.board.title;(0,s.setSelectedDrawing)({pseudo:r,board:l,drawingId:t,type:n.objPile[o].type})}n.refreshCanvasArea(0,0,n.state.width,n.state.height)}},n.onObjectUnlocked=function(e){for(var t=e.drawingId,i=!1,a=0;a<n.objPile.length&&!i;)n.objPile[a].id===t?i=!0:a+=1;if(i){if(n.props.pseudo===n.objPile[a].lockedBy)(0,n.props.setSelectedDrawing)(null);n.objPile[a].isLocked=!1,n.objPile[a].lockedBy="",n.refreshCanvasArea(0,0,n.state.width,n.state.height)}},n.onObjectEdited=function(e){for(var t=0;t<n.objPile.length;t++)n.objPile[t].id===e.drawingId&&n.objPile[t].applyModifications(e);n.refreshCanvasArea(0,0,n.state.width,n.state.height)},n.onObjectDeleted=function(e){n.objPile=n.objPile.filter((function(t){return t.id!==e.drawingId})),n.refreshCanvasArea(0,0,n.state.width,n.state.height)},n.componentName="CanvasManager",n.objPile=[],n.state={ctx:null,width:n.props.resolutionWidth,height:n.props.resolutionHeight},n.ctx=null,n.background=null,n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({ctx:this.canvas.getContext("2d")},(function(){console.log(e.props.drawings),e.generateObjectPile(e.props.drawings).then((function(t){e.objPile=t,e.refreshCanvasArea(0,0,e.state.width,e.state.height)}))})),this.canvas.addEventListener("mousedown",(function(t){return e.handleMouseDown(t)})),this.canvas.addEventListener("mouseup",(function(t){return e.handleMouseUp(t)})),this.canvas.addEventListener("mousemove",(function(t){return e.handleMouseMove(t)})),this.canvas.addEventListener("mouseleave",(function(){return e.handleMouseLeave()})),b.subscribeToEvent(E.SOCKET_MSG.OBJECT_CREATED,this.createObject,this.componentName),b.subscribeToEvent(E.SOCKET_MSG.OBJECT_EDITED,this.onObjectEdited,this.componentName),b.subscribeToEvent(E.SOCKET_MSG.OBJECT_LOCKED,this.onObjectLocked,this.componentName),b.subscribeToEvent(E.SOCKET_MSG.OBJECT_UNLOCKED,this.onObjectUnlocked,this.componentName),b.subscribeToEvent(E.SOCKET_MSG.OBJECT_DELETED,this.onObjectDeleted,this.componentName)}},{key:"componentWillUnmount",value:function(){var e=this;this.canvas.removeEventListener("mousedown",(function(t){return e.handleMouseDown(t)})),this.canvas.removeEventListener("mouseup",(function(t){return e.handleMouseUp(t)})),this.canvas.removeEventListener("mousemove",(function(t){return e.handleMouseMove(t)})),this.canvas.removeEventListener("mouseleave",(function(){return e.handleMouseLeave()})),b.unsubscribeToEvent(E.SOCKET_MSG.OBJECT_CREATED,this.createObject,this.componentName),b.unsubscribeToEvent(E.SOCKET_MSG.OBJECT_EDITED,this.onObjectEdited,this.componentName),b.unsubscribeToEvent(E.SOCKET_MSG.OBJECT_LOCKED,this.onObjectLocked,this.componentName),b.unsubscribeToEvent(E.SOCKET_MSG.OBJECT_UNLOCKED,this.onObjectUnlocked,this.componentName),b.unsubscribeToEvent(E.SOCKET_MSG.OBJECT_DELETED,this.onObjectDeleted,this.componentName)}},{key:"_onResize",value:function(){var e=this.parentContainer.clientWidth-20,t=this.parentContainer.clientHeight-20,n=t/e,i=this.props.resolutionHeight/this.props.resolutionWidth;i>n?(this.canvas.height=this.props.resolutionHeight,this.canvas.style.height="".concat(t,"px"),this.canvas.width=this.props.resolutionWidth,this.canvas.style.width="".concat(t/i,"px")):(this.canvas.width=this.props.resolutionWidth,this.canvas.style.width="".concat(e,"px"),this.canvas.height=this.props.resolutionHeight,this.canvas.style.height="".concat(e*i,"px")),this.refreshCanvasArea(0,0,this.state.width,this.state.height)}},{key:"refreshCanvasArea",value:function(e,t,n,i){this.state.ctx.clearRect(e,t,n,i),null!==this.background&&this.background.refreshArea(e,t,n,i);for(var a=0;a<this.objPile.length;a++)this.objPile[a].refreshArea(e,t,n,i)}},{key:"handleMouseDown",value:function(e){if(1===e.which){var t=this.canvas.getBoundingClientRect(),n=(e.clientX-t.left)*this.state.width/Number(this.canvas.style.width.replace("px","")),i=(e.clientY-t.top)*this.state.height/Number(this.canvas.style.height.replace("px",""));console.log("Click !! x:".concat(n,", y:").concat(i));for(var a=this.objPile.length,o=null;a--;)this.objPile[a].onMouseDown&&this.objPile[a].onMouseDown(n,i,this.props.pseudo)&&(o=a,a=0);for(var s=0;s<this.objPile.length;s++)s!==o&&this.objPile[s].lockedBy===this.props.pseudo&&b.sendMessage({type:E.SOCKET_MSG.UNLOCK_OBJECT,from:this.props.pseudo,to:"server",payload:{drawingId:this.objPile[s].id}});if(null!==o&&!this.objPile[o].isLocked){var r=this.objPile[o];b.sendMessage({type:E.SOCKET_MSG.LOCK_OBJECT,from:this.props.pseudo,to:"server",payload:{drawingId:r.id}})}console.log(this.objPile)}}},{key:"handleMouseMove",value:function(e){if(0===e.which){for(var t=this.canvas.getBoundingClientRect(),n=(e.clientX-t.left)*this.state.width/Number(this.canvas.style.width.replace("px","")),i=(e.clientY-t.top)*this.state.height/Number(this.canvas.style.height.replace("px","")),a=this.objPile.length,o=null;a--;)this.objPile[a].onMouseHover&&this.objPile[a].onMouseHover(n,i,this.props.pseudo)&&(o=a,a=0);if(null===o)document.getElementsByTagName("body")[0].style.cursor="url('cursor url with protocol'), default"}else if(1===e.which){for(var s=this.canvas.getBoundingClientRect(),r=(e.clientX-s.left)*this.state.width/Number(this.canvas.style.width.replace("px","")),l=(e.clientY-s.top)*this.state.height/Number(this.canvas.style.height.replace("px","")),c=this.objPile.length,d=null;c--;)this.objPile[c].onMouseDrag&&this.objPile[c].onMouseDrag(r,l,this.props.pseudo)&&(d=c,c=0);null!==d&&this.refreshCanvasArea(0,0,this.state.width,this.state.height)}}},{key:"handleMouseUp",value:function(e){var t=this.props,n=t.pseudo,i=t.board.title;if(1===e.which)for(var a=this.canvas.getBoundingClientRect(),o=(e.clientX-a.left)*this.state.width/Number(this.canvas.style.width.replace("px","")),s=(e.clientY-a.top)*this.state.height/Number(this.canvas.style.height.replace("px","")),r=0;r<this.objPile.length;r++){var l=this.objPile[r].onMouseUp(o,s,this.props.pseudo);if(Object.keys(l.modifications).length>0){var c=l.modifications;c.pseudo=n,c.board=i,c.drawingId=this.objPile[r].id,b.sendMessage({type:E.SOCKET_MSG.EDIT_OBJECT,from:this.props.pseudo,to:"server",payload:c})}l.shouldUnlock&&b.sendMessage({type:E.SOCKET_MSG.UNLOCK_OBJECT,from:this.props.pseudo,to:"server",payload:{drawingId:this.objPile[r].id}})}}},{key:"handleMouseLeave",value:function(){document.getElementsByTagName("body")[0].style.cursor="url('cursor url with protocol'), default"}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{ref:function(t){return e.parentContainer=t},id:"paperboard-canvas",style:{flex:1,display:"flex",height:"100%",flexDirection:"column",justifyContent:"center",alignItems:"center"}},a.a.createElement(W.a,{handleWidth:!0,handleHeight:!0,onResize:function(){return e._onResize()}}),a.a.createElement("canvas",{ref:function(t){return e.canvas=t},id:"canvascanvas",style:{backgroundColor:"white",borderRadius:"10px"}}))}}]),t}(i.Component),Ae=n(385),Ce=n(355),ye=n(391),Oe=n(182),Te=n(392),ve=n(394),Se=n(390),ke=n(162),De=n(393),_e={},we=1;we<=50;we++)_e[we.toString()]=we;var Be={dashed:"---",normal:"\u2014"},Re=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).onClickEditObject=function(e){switch(e){case"Color":n.setState((function(e){return{isLineColorPickerToggled:!e.isLineColorPickerToggled}}));break;case"Width":n.setState((function(e){return{isLineWidthPickerToggled:!e.isLineWidthPickerToggled}}));break;case"LineStyle":n.setState((function(e){return{isLineStylePickerToggled:!e.isLineStylePickerToggled}}));break;case"FillColor":n.setState((function(e){return{isFillColorPickerToggled:!e.isFillColorPickerToggled}}));break;default:alert(e+" not handled")}},n.handleColor=function(e){var t=n.props.selectedDrawing,i=e.value,a=t;a&&(a.lineColor=i,b.sendMessage({type:E.SOCKET_MSG.EDIT_OBJECT,from:a.pseudo,to:"server",payload:a}))},n.handleLineWidth=function(e){var t=n.props.selectedDrawing,i=e.item,a=t;a&&(a.lineWidth=i,b.sendMessage({type:E.SOCKET_MSG.EDIT_OBJECT,from:a.pseudo,to:"server",payload:a}))},n.handleLineStyle=function(e){var t=n.props.selectedDrawing,i=e.item,a=t;a&&(a.lineStyle=i,b.sendMessage({type:E.SOCKET_MSG.EDIT_OBJECT,from:a.pseudo,to:"server",payload:a}))},n.handleColorFillColor=function(e){var t=n.props.selectedDrawing,i=e.value,a=t;a&&(a.fillColor=i,b.sendMessage({type:E.SOCKET_MSG.EDIT_OBJECT,from:a.pseudo,to:"server",payload:a}))},n.handleDeleteObject=function(){var e=n.props.selectedDrawing;e&&b.sendMessage({type:E.SOCKET_MSG.DELETE_OBJECT,from:e.pseudo,to:"server",payload:e})},n.state={isLineColorPickerToggled:!1,isLineWidthPickerToggled:!1,isLineStylePickerToggled:!1,isFillColorPickerToggled:!1},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.selectedDrawing===this.props.selectedDrawing||e.selectedDrawing||this.setState({isLineColorPickerToggled:!1,isLineWidthPickerToggled:!1,isLineStylePickerToggled:!1,isFillColorPickerToggled:!1})}},{key:"render",value:function(){var e=this,t=this.state,i=t.isLineColorPickerToggled,o=t.isLineWidthPickerToggled,s=t.isLineStylePickerToggled,r=t.isFillColorPickerToggled,l=this.props.selectedDrawing;return console.log(this.props),a.a.createElement("div",{style:{maxWidth:360,backgroundColor:"white"}},a.a.createElement(Ae.a,{component:"nav","aria-label":"main mailbox folders",subheader:a.a.createElement(Se.a,{component:"div",id:"nested-list-subheader"},a.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",fontSize:"2em"}},"Edit"))},a.a.createElement(Ce.a,{button:!0,key:"Color",onClick:function(){return e.onClickEditObject("Color")},disabled:!l||"image"===l.type},a.a.createElement(ye.a,null,a.a.createElement(Te.a,null)),a.a.createElement(Oe.a,{primary:"Color"}))),i&&a.a.createElement(a.a.Fragment,null,a.a.createElement(x,{color:"",hexColorCode:"",handleClick:this.handleColor,listField:N,field:"Line color",type:"color"})),a.a.createElement(Ae.a,null,a.a.createElement(Ce.a,{button:!0,key:"FillColor",onClick:function(){return e.onClickEditObject("FillColor")},disabled:!l||"image"===l.type||"line"===l.type||"handwriting"===l.type},a.a.createElement(ye.a,null,a.a.createElement(ke.a,null,a.a.createElement("img",{src:n(337),alt:""}))),a.a.createElement(Oe.a,{primary:"Fill Color"}))),r&&a.a.createElement(a.a.Fragment,null,a.a.createElement(x,{color:"",hexColorCode:"",handleClick:this.handleColorFillColor,listField:N,field:"Fill color",type:"color"})),a.a.createElement(Ae.a,null,a.a.createElement(Ce.a,{button:!0,key:"Width",onClick:function(){return e.onClickEditObject("Width")},disabled:!l||"image"===l.type},a.a.createElement(ye.a,null,a.a.createElement(ke.a,null,a.a.createElement("img",{src:n(338),alt:""}))),a.a.createElement(Oe.a,{primary:"Width"}))),o&&a.a.createElement(a.a.Fragment,null,a.a.createElement(x,{color:"",hexColorCode:"",handleClick:this.handleLineWidth,listField:_e,field:"Line width"})),a.a.createElement(Ae.a,null,a.a.createElement(Ce.a,{button:!0,key:"LineStyle",onClick:function(){return e.onClickEditObject("LineStyle")},disabled:!l||"image"===l.type},a.a.createElement(ye.a,null,a.a.createElement(ke.a,null,a.a.createElement("img",{src:n(339),alt:""}))),a.a.createElement(Oe.a,{primary:"Line Style"}))),s&&a.a.createElement(a.a.Fragment,null,a.a.createElement(x,{color:"",hexColorCode:"",handleClick:this.handleLineStyle,listField:Be,field:"Line style"})),a.a.createElement(De.a,null),a.a.createElement(Ae.a,null,a.a.createElement(Ce.a,{button:!0,key:"Delete",onClick:this.handleDeleteObject,disabled:!l},a.a.createElement(ye.a,null,a.a.createElement(ve.a,null)),a.a.createElement(Oe.a,{primary:"Delete"}))))}}]),t}(i.Component),je=n(207),Pe=n(395),Me=n(396),xe=n(397),Ne=n(398),Le=n(399),Ie=n(400),Ge=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).onClickCreateObject=function(e){var t=n.props,i=t.pseudo,a=t.resolutionHeight,o=t.resolutionWidth;b.sendMessage({type:E.SOCKET_MSG.CREATE_OBJECT,from:i,to:"server",payload:{shape:e,positionX:(o/2).toString(),positionY:(a/2).toString()}})},n.onClickCreateObjectImage=function(){var e=document.getElementById("myFile").files[0];void 0!==e&&(["image/png","image/jpeg","image/jpg"].includes(e.type)?e.size>42e3?alert("File size should not exceed ".concat(42,"ko.")):L(e).then((function(e){var t=new Image;t.onload=function(){var i=n.props,a=i.pseudo,o=i.resolutionHeight,s=i.resolutionWidth,r={shape:"image",description:{srcURI:e}};t.width>t.height?(r.description.width=300..toString(),r.description.height=(r.description.width*(t.height/t.width)).toString()):(r.description.height=300..toString(),r.description.width=(r.description.height/(t.height/t.width)).toString()),r.positionX=((s-r.description.width)/2).toString(),r.positionY=((o-r.description.height)/2).toString(),b.sendMessage({type:E.SOCKET_MSG.CREATE_OBJECT,from:a,to:"server",payload:r})},t.src=e})):alert("Bad File Type [".concat(e.type,"]. File type should be among [png, jpeg, jpg].")))},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{style:{maxWidth:250,backgroundColor:"white"}},a.a.createElement(Ae.a,{component:"nav","aria-label":"main mailbox folders",subheader:a.a.createElement(Se.a,{component:"div",id:"nested-list-subheader"},a.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",fontSize:"2em"}},"Tools"))},a.a.createElement(Ce.a,{button:!0,key:"Text",onClick:function(){return e.onClickCreateObject("text")}},a.a.createElement(ye.a,null,a.a.createElement(Pe.a,null)),a.a.createElement(Oe.a,{primary:"Text"}))),a.a.createElement(De.a,null),a.a.createElement(Ae.a,null,[{title:"Draw",component:a.a.createElement(Me.a,null)},{title:"Line",component:a.a.createElement(xe.a,null)},{title:"Rectangle",component:a.a.createElement(Ne.a,null)},{title:"Circle",component:a.a.createElement(Le.a,null)},{title:"Triangle",component:a.a.createElement(ke.a,null,a.a.createElement("img",{src:n(340),alt:""}))}].map((function(t){return a.a.createElement(Ce.a,{button:!0,key:t.title,onClick:function(){return e.onClickCreateObject(t.title.toLowerCase())}},a.a.createElement(ye.a,null,t.component),a.a.createElement(Oe.a,{primary:t.title}))}))),a.a.createElement(De.a,null),a.a.createElement(Ae.a,null,a.a.createElement(Ce.a,{button:!0,key:"Picture",onClick:function(){var e=document.getElementById("myFile");e&&e.click()}},a.a.createElement(ye.a,null,a.a.createElement(Ie.a,null)),a.a.createElement(Oe.a,{primary:"Picture"})),a.a.createElement("input",{type:"file",id:"myFile",style:{position:"fixed",bottom:"10000px"},onChange:function(){return e.onClickCreateObjectImage()}})))}}]),t}(i.Component),He=n(401),Ye=n(402),Ke=n(403),Xe=n(28),We=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.users;return a.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}},e&&e.map((function(e,t){return a.a.createElement("div",{key:t,style:{backgroundColor:Xe(e),width:30,height:30,borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",color:"white"}},e[0])})))}}]),t}(i.Component),Fe=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).onSave=function(){alert("TODO SAVE")},n.onImport=function(){alert("TODO IMPORT")},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.paperboard,n=e.drawers,i=e.onQuit;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",backgroundColor:"#f9a322"}},a.a.createElement("p",{className:"title is-1",style:{display:"flex",alignItems:"center",color:"black",marginLeft:"15px",marginTop:"5px",marginBottom:"5px"}},t&&"-- ".concat(t.title.toString().toUpperCase()," --")),a.a.createElement(We,{users:n}),a.a.createElement("div",{style:{display:"flex"}},a.a.createElement(I.a,{onClick:this.onImport},a.a.createElement(He.a,null)),a.a.createElement(I.a,{onClick:this.onSave},a.a.createElement(Ye.a,null)),a.a.createElement(I.a,{onClick:i},a.a.createElement(Ke.a,null)))))}}]),t}(i.Component),Je=n(405),Ue=n(404),Ze=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onCloseChat,n=e.messages;return a.a.createElement("div",{id:"page",style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",width:"100%",backgroundColor:"#e8e8e8",height:window.innerHeight/3,borderRadius:10,borderWidth:1,borderColor:"#e8e8e8"}},a.a.createElement("div",{style:{display:"flex",flexDirection:"horizontal",justifyContent:"space-between",alignItems:"center",paddingRight:"5%",paddingLeft:"5%",backgroundColor:"#f9a322",width:"100%",borderTopLeftRadius:10,borderTopRightRadius:10,marginBottom:10}},a.a.createElement("div",null," Chat"),a.a.createElement(D.a,{onClick:function(){return t()}},a.a.createElement(Ue.a,null))),a.a.createElement("div",{style:{display:"flex",flex:1,width:"100%",overflow:"scroll",flexDirection:"column"}},n))}}]),t}(i.Component),Qe=n(189),Ve=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.color,n=e.name,i=e.message,o=e.isAuthor;return a.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%",paddingRight:"10%",paddingLeft:"10%"}},a.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",flexDirection:o?"row":"row-reverse"}},n,a.a.createElement("div",{style:{backgroundColor:t,width:24,height:24,borderRadius:12,display:"flex",justifyContent:"center",alignItems:"center",color:"white",marginLeft:o?10:0,marginRight:o?0:10}},n[0])),a.a.createElement("div",{style:{display:"flex",color:"black",justifyContent:o?"flex-end":"flex-start"}},i))}}]),t}(i.Component),ze=n(28),qe=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).sendMessage=function(){var e=n.props.pseudo,t=n.state.textFieldValue;""!==t&&(b.sendMessage({type:E.SOCKET_MSG.CHAT_MESSAGE,from:e,to:"server",payload:{msg:t}}),n.setState({textFieldValue:""}))},n.receiveMessage=function(e,t){var i=n.props.pseudo,o=n.state.messages;o.push(a.a.createElement(Ve,{key:o.length,color:ze(e),name:e,message:t,isAuthor:e===i})),n.setState({messages:o})},n.catchReturn=function(e){"Enter"===e.key&&n.sendMessage()},n.handleTextFieldChange=function(e){"Enter"===e.key&&n.sendMessage(),n.setState({textFieldValue:e.target.value})},n.onChat=function(){n.setState((function(e){return{isChatDisplayed:!e.isChatDisplayed}}))},n.componentName="ChatComponent",n.state={isChatDisplayed:!1,textFieldValue:"",messages:[]},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){b.subscribeToEvent(E.SOCKET_MSG.CHAT_MESSAGE,this.receiveMessage,this.componentName)}},{key:"componentWillUnmount",value:function(){b.unsubscribeToEvent(E.SOCKET_MSG.CHAT_MESSAGE,this.receiveMessage,this.componentName)}},{key:"render",value:function(){var e=this,t=this.state,n=t.isChatDisplayed,i=t.messages,o=t.textFieldValue;return a.a.createElement(a.a.Fragment,null,n&&a.a.createElement(Ze,{onCloseChat:this.onChat,messages:i}),a.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},n&&a.a.createElement("div",{style:{paddingRight:"15%"}},a.a.createElement(Qe.a,{id:"outlined-basic",label:"Message",margin:"normal",variant:"outlined",style:{backgroundColor:"white",borderRadius:5},onChange:this.handleTextFieldChange,onKeyPress:this.catchReturn,value:o})),a.a.createElement("div",{onClick:function(){return n?e.sendMessage():e.onChat()},style:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"white",width:n?50:100,height:n?50:100,borderRadius:n?25:50,boxShadow:"6px 6px 6px #9E9E9E",shadowOpacity:.5}},a.a.createElement(Je.a,{style:{width:n?20:60,height:n?20:60}}))))}}]),t}(i.Component),$e=n(209),et=n.n($e),tt=n(208),nt=n.n(tt),it=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).agreeDeletion=function(){var e=n.props,t=e.msg;(0,e.handleObjectDelete)();var i={};i.pseudo=t.to,i.board=t.payload.board,i.drawingId=t.payload.drawingId,i&&b.sendMessage({type:E.SOCKET_MSG.DELETE_OBJECT,from:t.to,to:"server",payload:i})},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.msg,n=e.handleObjectDelete;return a.a.createElement("div",{style:{display:"flex",width:"70%",flexDirection:"column",alignContent:"center",alignItems:"center",backgroundColor:"white",paddingTop:"1em",paddingBottom:"1em",border:"2px solid #f9a322"}},a.a.createElement("div",{style:{fontSize:"2em",textAlign:"center"}},"".concat(t.from," want to delete one ").concat(t.payload.type," you have created")),a.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around",width:"100%"}},a.a.createElement(I.a,{variant:"contained",color:"secondary",startIcon:a.a.createElement(nt.a,null),onClick:n},"Disagree"),a.a.createElement(I.a,{variant:"contained",color:"primary",startIcon:a.a.createElement(et.a,null),onClick:this.agreeDeletion},"Agree")))}}]),t}(i.Component),at=function(e){function t(e){var n;Object(r.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).onQuit=function(){var e=n.state.pseudo;b.sendMessage({type:E.SOCKET_MSG.LEAVE_BOARD,from:e,to:"server",payload:{}})},n.setSelectedDrawing=function(e){n.setState({selectedDrawing:e})},n.handleDrawerLeftBoard=function(e,t){if(n._mounted){n.setState({drawers:t});var i=n.state.pseudo;i===e&&n.props.history.push({pathname:"/lounge",state:{pseudo:i}})}},n.handleDrawerJoinedBoard=function(e){n.setState({drawers:e})},n.handleObjectDelete=function(e){n.setState((function(t){return{isDeletePopUpDisplayed:!t.isDeletePopUpDisplayed,deleteMsg:t.isDeletePopUpDisplayed?null:e}}))},n.handleObjectDeleted=function(e){var t=n.state.selectedDrawing;t&&t.drawingId===e.drawingId&&n.setState({selectedDrawing:null})};var i=e.location.state,a=i.paperboard,o=i.pseudo,s=i.drawers;return n.state={paperboard:a,pseudo:o,drawers:s,selectedDrawing:null,isDeletePopUpDisplayed:!1,deleteMsg:null},n.componentName="PaperBoardPage",n._mounted=!1,n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this._mounted=!0,b.subscribeToEvent(E.SOCKET_MSG.DRAWER_LEFT_BOARD,this.handleDrawerLeftBoard,this.componentName),b.subscribeToEvent(E.SOCKET_MSG.DRAWER_JOIN_BOARD,this.handleDrawerJoinedBoard,this.componentName),b.subscribeToEvent(E.SOCKET_MSG.DELETE_OBJECT,this.handleObjectDelete,this.componentName),b.subscribeToEvent(E.SOCKET_MSG.OBJECT_DELETED,this.handleObjectDeleted,this.componentName)}},{key:"componentWillUnmount",value:function(){b.unsubscribeToEvent(E.SOCKET_MSG.DRAWER_LEFT_BOARD,this.handleDrawerLeftBoard,this.componentName),b.unsubscribeToEvent(E.SOCKET_MSG.DRAWER_JOIN_BOARD,this.handleDrawerJoinedBoard,this.componentName),b.unsubscribeToEvent(E.SOCKET_MSG.DELETE_OBJECT,this.handleObjectDelete,this.componentName),b.unsubscribeToEvent(E.SOCKET_MSG.OBJECT_DELETED,this.handleObjectDeleted,this.componentName),this._mounted=!1}},{key:"render",value:function(){var e=this,t=this.state,n=t.paperboard,i=t.drawers,o=t.pseudo,s=t.selectedDrawing,r=t.isDeletePopUpDisplayed,l=t.deleteMsg;return a.a.createElement(p,{customStyle:{display:"flex",flexDirection:"column"},imgSrc:je},a.a.createElement(Fe,{paperboard:n,drawers:i,onQuit:this.onQuit}),r&&l&&a.a.createElement("div",{style:{display:"flex",width:"100%",height:"100%",position:"absolute",justifyContent:"center",alignItems:"center"}},a.a.createElement(it,{msg:l,handleObjectDelete:this.handleObjectDelete})),a.a.createElement("div",{style:{display:"flex",width:"100%",flexDirection:"row",alignItems:"center",flex:1}},a.a.createElement(Ge,{pseudo:o,resolutionWidth:1080,resolutionHeight:720}),a.a.createElement(be,{ref:function(t){return e.canvas=t},resolutionWidth:1080,resolutionHeight:720,toggleShapePanel:this.toggleShapePanel,board:n,pseudo:o,drawings:n.drawings,setSelectedDrawing:this.setSelectedDrawing}),a.a.createElement(Re,{selectedDrawing:s})),a.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column",position:"absolute",bottom:50,right:50}},a.a.createElement(qe,{pseudo:o})))}}]),t}(i.Component),ot=Object(u.f)(at),st=n(152),rt=(n(341),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleDrawerDisconnected=function(){st.a.fail("You have been disconnected from server, you will be redirected to login page",3e3,(function(){})),n.timeouts.push(setTimeout((function(){"/"!==n.props.location.pathname&&n.props.history.push({pathname:"/"}),st.a.hide()}),3e3))},n.componentName="App",n.timeouts=[],window.performance&&1===performance.navigation.type&&"/"!==n.props.location.pathname&&(alert("This page is reloaded, you will be disconnected and redirected to the login page"),n.props.history.push({pathname:"/"})),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){b.subscribeToEvent(E.SOCKET_MSG.DRAWER_DISCONNECTED,this.handleDrawerDisconnected,this.componentName)}},{key:"componentWillUnmount",value:function(){for(b.unsubscribeToEvent(E.SOCKET_MSG.DRAWER_DISCONNECTED,this.handleDrawerDisconnected,this.componentName);this.timeouts.length>0;){var e=this.timeouts.pop();clearTimeout(e)}}},{key:"render",value:function(){return a.a.createElement(u.c,null,a.a.createElement(u.a,{exact:!0,path:"/",component:y}),a.a.createElement(u.a,{path:"/lounge",component:B}),a.a.createElement(u.a,{path:"/new-board",component:H}),a.a.createElement(u.a,{path:"/paperboard/:title",component:ot}))}}]),t}(i.Component)),lt=Object(u.f)(rt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(o.render)(a.a.createElement(s.a,{basename:"/PaperBoardClient"},a.a.createElement(lt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[230,1,2]]]);
//# sourceMappingURL=main.f563b048.chunk.js.map